
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../demand/">
      
      
        <link rel="next" href="../visibility/">
      
      
        
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.0">
    
    
      
        <title>Fiber Path - Connectivity Planning Platform Developer Documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.618322db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#fiber-path" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Connectivity Planning Platform Developer Documentation" class="md-header__button md-logo" aria-label="Connectivity Planning Platform Developer Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Connectivity Planning Platform Developer Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Fiber Path
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Connectivity Planning Platform Developer Documentation" class="md-nav__button md-logo" aria-label="Connectivity Planning Platform Developer Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Connectivity Planning Platform Developer Documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../integrations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Model Integration Framework
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../inputdata/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Input data
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../proximity/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Proximity
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../coverage/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Coverage
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../demand/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Demand
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Fiber Path
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Fiber Path
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      
        Overview
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#class-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      
        Class Parameters
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#class-attributes" class="md-nav__link">
    <span class="md-ellipsis">
      
        Class Attributes
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#methods" class="md-nav__link">
    <span class="md-ellipsis">
      
        Methods
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#outputs" class="md-nav__link">
    <span class="md-ellipsis">
      
        Outputs
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../visibility/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Visibility
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../costmodel/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Cost
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../assignment/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Technology Assignment
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../results/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Results Metadata
  

    
  </span>
  
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      
        Overview
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#class-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      
        Class Parameters
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#class-attributes" class="md-nav__link">
    <span class="md-ellipsis">
      
        Class Attributes
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#methods" class="md-nav__link">
    <span class="md-ellipsis">
      
        Methods
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#outputs" class="md-nav__link">
    <span class="md-ellipsis">
      
        Outputs
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="fiber-path">Fiber Path</h1>
<h2 id="overview">Overview</h2>
<p>The fiber path model identifies the shortest and most cost-effective paths for connecting unconnected points of interest (POIs) to the existing optical fiber network using the road network. By minimizing the total length of fiber required, this model reduces overall deployment costs while efficiently extending connectivity.</p>
<p>To start with, the model connects POIs and fiber nodes to the existing road network using straight lines (unless they are already on the road network). Then, for each unconnected POI, it computes the shortest path to all fiber nodes. POIs that are already connected to the fiber network can also act as fiber nodes, from which the fiber network can be extended.</p>
<p><em>Figure: Graph initialization and fiber path algorithm</em></p>
<p><img alt="graph-initialization" src="../img/graph-initialization.png" /></p>
<p>At each step of the algorithm, new connections are made between connected and unconnected points as long as the length of the new connection is below a specified threshold. For example, it can be specified that no single fiber line should be longer than 5 kilometers.</p>
<p>This approach enables economies of scale: POIs can act as relay points for neighboring POIs, enabling connectivity without each one needing to connect directly to a transmission node. This approach optimizes resource usage and simplifies network expansion.</p>
<p>In practice, this model is an application of <a href="https://en.wikipedia.org/wiki/Kruskal%27s_algorithm">Kruskal's algorithm</a> to find a Minimum Spanning Tree (MST) in a network graph, where the edges are the road network and the vertices are POIs and fiber nodes. The MST ensures the minimal fiber path necessary to connect all relevant points while adhering to road network constraints related to distance.</p>
<p><em>Figure: Output of Fiber Path algorithm</em></p>
<p><img alt="nam-fiber-lines" src="../img/nam-fiber-lines.png" /></p>
<p><strong>Key features:</strong></p>
<ul>
<li>Plans optimal fiber paths using road networks or direct line-of-sight connections</li>
<li>Supports clustering of points for faster computations and regional planning</li>
<li>Incorporates scale economies, allowing POIs to connect to other connected POIs</li>
<li>Optimizes based on physical distance or operator profits (thus findings the paths that connect all POIs, while maximizing the potential revenue by laying down fiber through the most populous zones)</li>
</ul>
<h2 id="class-parameters">Class Parameters</h2>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>points_of_interest</td>
<td><code>PointOfInterestCollection</code></td>
<td>Required</td>
<td>Collection of points of interest to be connected</td>
</tr>
<tr>
<td>transmission_nodes</td>
<td><code>TransmissionNodeCollection</code></td>
<td>Required</td>
<td>Collection of transmission infrastructure nodes to connect to</td>
</tr>
<tr>
<td>max_connection_distance</td>
<td><code>int</code></td>
<td>Required</td>
<td>Maximum connection distance in meters using the selected <code>distance_metric</code></td>
</tr>
<tr>
<td>use_road_data</td>
<td><code>bool</code></td>
<td>Required</td>
<td>If True, use road networks; if False, use direct line-of-sight</td>
</tr>
<tr>
<td>scale_economies</td>
<td><code>bool</code></td>
<td><code>True</code></td>
<td>If True, POIs can connect to other connected POIs; if False, POIs can only connect to transmission nodes</td>
</tr>
<tr>
<td>n_clusters</td>
<td><code>int</code></td>
<td><code>None</code></td>
<td>Number of clusters for analysis. If None, clustering is based on distance. If 1, no clustering is performed</td>
</tr>
<tr>
<td>constrained</td>
<td><code>bool</code></td>
<td><code>False</code></td>
<td>If True, each cluster must contain at least one transmission node</td>
</tr>
<tr>
<td>network_type</td>
<td><code>str</code></td>
<td><code>'all'</code></td>
<td>Road network type ('all', 'bike', 'walk', etc.)</td>
</tr>
<tr>
<td>random_state</td>
<td><code>int</code></td>
<td><code>0</code></td>
<td>Seed for random operations</td>
</tr>
<tr>
<td>distance_metric</td>
<td><code>str</code></td>
<td><code>'length'</code></td>
<td>Metric to optimize: 'length' (physical distance) or 'net_cost' (cost minus revenue)</td>
</tr>
<tr>
<td>revenue_per_pop</td>
<td><code>int</code></td>
<td><code>10</code></td>
<td>Estimated revenue per person along the fiber path</td>
</tr>
<tr>
<td>fiber_cost_per_km</td>
<td><code>int</code></td>
<td><code>5</code></td>
<td>Cost of fiber per kilometer</td>
</tr>
<tr>
<td>population_handler</td>
<td><code>PopulationDataHandler</code></td>
<td><code>None</code></td>
<td>Required for net_cost distance metric</td>
</tr>
<tr>
<td>logger</td>
<td><code>Logger</code></td>
<td><code>None</code></td>
<td>Logger instance for capturing messages. If None, a default logger will be created</td>
</tr>
</tbody>
</table>
<h2 id="class-attributes">Class Attributes</h2>
<table>
<thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>points_of_interest</td>
<td><code>PointOfInterestCollection</code></td>
<td>Original collection of POIs</td>
</tr>
<tr>
<td>transmission_nodes</td>
<td><code>TransmissionNodeCollection</code></td>
<td>Original collection of transmission nodes</td>
</tr>
<tr>
<td>all_collection</td>
<td><code>EntityCollection</code></td>
<td>Combined collection of POIs and transmission nodes</td>
</tr>
<tr>
<td>max_connection_distance</td>
<td><code>int</code></td>
<td>Maximum allowed connection distance</td>
</tr>
<tr>
<td>use_road_data</td>
<td><code>bool</code></td>
<td>Flag indicating whether to use road data or line-of-sight</td>
</tr>
<tr>
<td>scale_economies</td>
<td><code>bool</code></td>
<td>Flag indicating whether POIs can connect to other connected POIs</td>
</tr>
<tr>
<td>n_clusters</td>
<td><code>int</code></td>
<td>Number of clusters for analysis</td>
</tr>
<tr>
<td>distance_metric</td>
<td><code>str</code></td>
<td>Metric used for optimization</td>
</tr>
<tr>
<td>analysis_param</td>
<td><code>dict</code></td>
<td>Dictionary storing configuration parameters</td>
</tr>
<tr>
<td>analysis_stats</td>
<td><code>dict</code></td>
<td>Dictionary storing statistics (counts, lengths, times)</td>
</tr>
<tr>
<td>fiber_path_dict</td>
<td><code>dict</code></td>
<td>Dictionary storing path information for each POI</td>
</tr>
<tr>
<td>fiber_path_nodes</td>
<td><code>DataFrame</code></td>
<td>DataFrame containing nodes in the fiber path network</td>
</tr>
<tr>
<td>fiber_path_edges</td>
<td><code>DataFrame</code></td>
<td>DataFrame containing edges in the fiber path network</td>
</tr>
</tbody>
</table>
<h2 id="methods">Methods</h2>
<table>
<thead>
<tr>
<th>Method</th>
<th>Return Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>perform_analysis(save_cache=True, use_cache=True, not_connected_only=False)</td>
<td><code>str</code></td>
<td>Executes the fiber path analysis with options for caching and incremental processing</td>
</tr>
<tr>
<td>perform_multilength_analysis(max_connection_distances)</td>
<td><code>None</code></td>
<td>Runs analysis for multiple maximum connection distances</td>
</tr>
<tr>
<td>get_results_table()</td>
<td><code>DataFrame</code></td>
<td>Returns fiber path information for each connected POI</td>
</tr>
<tr>
<td>get_fp_edges_table()</td>
<td><code>DataFrame</code></td>
<td>Returns fiber path edges</td>
</tr>
<tr>
<td>get_fp_nodes_table()</td>
<td><code>DataFrame</code></td>
<td>Returns fiber path nodes</td>
</tr>
<tr>
<td>format_analysis_summary()</td>
<td><code>str</code></td>
<td>Formats the analysis statistics as a human-readable string summary</td>
</tr>
<tr>
<td>connect_pois(graph_pdn, connected_idx, unconnected_idx, remainder_idx, graph_nx)</td>
<td><code>tuple</code></td>
<td>Connects unconnected POIs to the nearest connected point dynamically</td>
</tr>
<tr>
<td>extract_paths(graph_pdn, fiber_path_dict)</td>
<td><code>DataFrame</code></td>
<td>Extracts fiber paths from the graph based on the fiber path dictionary</td>
</tr>
<tr>
<td>get_fiber_path_graph(graph, paths)</td>
<td><code>nx.MultiGraph</code></td>
<td>Gets a graph representation of fiber paths</td>
</tr>
<tr>
<td>get_fiber_path_nodes_edges(fiber_path_graph)</td>
<td><code>dict</code></td>
<td>Gets nodes and edges from the fiber path graph</td>
</tr>
<tr>
<td>path_total_from_nx_graph(graph, node_list, metric)</td>
<td><code>float</code></td>
<td>Calculates the total path length or cost</td>
</tr>
</tbody>
</table>
<h2 id="outputs">Outputs</h2>
<p>The <code>get_results_table()</code> method produces a DataFrame with the following columns: </p>
<ul>
<li>closest_node_id </li>
<li>closest_node_distance</li>
<li>connected_node_id</li>
<li>connected_node_distance</li>
<li>fiber_path</li>
<li>upstream_node_id</li>
<li>upstream_node_distance</li>
</ul>
<p>These are summarized in the diagram below. In this example, the points of interest are schools.</p>
<p><img alt="fiber-results" src="../img/fiberpath-output.png" /></p>
<h2 id="example">Example</h2>
<pre><code class="language-python">import pandas as pd
from giga_inframapkit.entities.pointofinterest import PointOfInterestCollection
from giga_inframapkit.entities.transmissionnode import TransmissionNodeCollection
from giga_inframapkit.fiberpath.fiberpath import FiberPath

# 1. Set up your data collections

poi_df = pd.read_csv(&quot;input/points_of_interest.csv&quot;)
poi_collection = PointOfInterestCollection()
poi_collection.load_from_records(poi_df.to_dict('records'))

transmission_node_df = pd.read_csv(&quot;input/transmission_nodes.csv&quot;)
transmission_node_collection = TransmissionNodeCollection()
transmission_node_collection.load_from_records(transmission_node_df.to_dict('records'))

# PointOfInterestCollection: 100 entities
# TransmissionNodeCollection: 30 entities

# 2. Create a FiberPath instance

fiberpath = FiberPath(
    points_of_interest = poi_collection, 
    transmission_nodes = transmission_node_collection, 
    max_connection_distance = 10000,  # 1km
    use_road_data = True,
    n_clusters = 1,  # No clustering of POIs
    constrained = False,
    network_type = &quot;all&quot;,
    random_state = 9,
    distance_metric = &quot;length&quot;,
    logger = None
    )

# 3. Run the analysis

fiberpath.perform_analysis()

# INFO:fiberpath_ESP:Running analysis without clustering...
# INFO:fiberpath_ESP:Dynamically connecting points of interest...
# Generating contraction hierarchies with 8 threads.
# Setting CH node vector of size 35771
# Setting CH edge vector of size 42545
# Range graph removed 1186 edges of 85090
# . 10% . 20% . 30% . 40% . 50% . 60% . 70% . 80% . 90% . 100%
# Generating contraction hierarchies with 8 threads.
# Setting CH node vector of size 35771
# Setting CH edge vector of size 42545
# Range graph removed 1186 edges of 85090
# . 10% . 20% . 30% . 40% . 50% . 60% . 70% . 80% . 90% . 100%
# Fiber Path Analysis Summary:
# Number of points of interest: 100
# Number of transmission nodes: 30
# Number of unconnected points of interest in the original dataset: 100
# Fiber path length (km): 277.59
# Number of newly connected points of interest by fiber path: 100
# Number of points of interest that cannot be connected by fiber path: 0
# Time taken for analysis: 30.68 seconds

fiberpath_results = fiberpath.get_results_table()

fiberpath_results.head()

# poi_id    closest_node_id closest_node_distance   connected_node_id   connected_node_distance fiber_path  upstream_node_id    upstream_node_distance  max_dist_km in_mst_solution n_conns
# 0 f01b7a6c-8d4e-4a7c-89f8-ef79eff4aab5    b7e56176-ea86-45a8-b494-4a9cefb4a75b    4474.282580 4c378326-6260-476a-bf24-8862b7ada7e0    21846.181627    [4c378326-6260-476a-bf24-8862b7ada7e0, e8fc47f...   d94433a9-0da0-4fd5-af57-ddfb321fc525    3792.344302 inf True    5
# 1 3c1b571e-ab30-4c81-832d-51bdfef51bba    c530d19a-1e10-4efb-83b3-69dd6d8dca30    1157.624367 c530d19a-1e10-4efb-83b3-69dd6d8dca30    1157.624367 [c530d19a-1e10-4efb-83b3-69dd6d8dca30]  c530d19a-1e10-4efb-83b3-69dd6d8dca30    1157.624367 inf True    1
# 2 03116452-1288-434e-83d5-fed21199c4a8    090dcd28-f45e-42b6-be51-73fa90b3e7f7    916.358942  090dcd28-f45e-42b6-be51-73fa90b3e7f7    916.358942  [090dcd28-f45e-42b6-be51-73fa90b3e7f7]  090dcd28-f45e-42b6-be51-73fa90b3e7f7    916.358942  inf True    1
# 3 775b863e-688e-45e8-b12e-956a3144bd35    541c5949-ab47-4a42-83df-2f5653718d5a    5241.324763 926790f6-1345-4cab-92eb-0d28185e2d54    15337.141260    [926790f6-1345-4cab-92eb-0d28185e2d54, 20de279...   0b373675-de87-476b-9262-a0f7d9fe97c7    1635.844092 inf True    5
# 4 9c0cf673-558f-47f4-b008-68872ebfd0a1    0430c874-2cc1-4b96-858f-07bddf5de495    3372.765524 0430c874-2cc1-4b96-858f-07bddf5de495    3687.584338 [0430c874-2cc1-4b96-858f-07bddf5de495, bbd7b66...   8955c08a-d3a8-4dd0-872a-09489285a97a    2342.884136 inf True    3
</code></pre>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "..", "features": [], "search": "../assets/javascripts/workers/search.7a47a382.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.e71a0d61.min.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>